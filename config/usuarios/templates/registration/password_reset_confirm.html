{% extends "base.html" %}
{% load static %}

{% block title %}Nueva contraseña{% endblock %}
{% block page_css %}<link rel="stylesheet" href="{% static 'css/pages/login.css' %}">{% endblock %}

{% block content %}
<section class="card auth">
  {% if validlink %}
    <h1 class="auth__title">Define una nueva contraseña</h1>

    {% if form.non_field_errors %}
      <div class="alert alert--error">{{ form.non_field_errors }}</div>
    {% endif %}

    <form method="post" class="form">
      {% csrf_token %}
      <div class="form-grid">
        <p>
          <label class="label" for="id_new_password1">Nueva contraseña</label>
          <input class="input" type="password" name="new_password1" id="id_new_password1" required autocomplete="new-password">
        </p>
        <p>
          <label class="label" for="id_new_password2">Confirmar contraseña</label>
          <input class="input" type="password" name="new_password2" id="id_new_password2" required autocomplete="new-password">
        </p>
      </div>

      <div class="actions">
        <button class="btn btn--primary" type="submit">Guardar contraseña</button>
        <a class="btn btn--ghost" href="{% url 'login' %}">Cancelar</a>
      </div>
    </form>
  {% else %}
    <h1 class="auth__title">Enlace no válido</h1>
    <p>El enlace de restablecimiento no es válido o ha expirado. Solicita uno nuevo.</p>
    <div class="actions">
      <a class="btn btn--primary" href="{% url 'password_reset' %}">Solicitar nuevo enlace</a>
      <a class="btn btn--ghost" href="{% url 'landing_page' %}">Ir al inicio</a>
    </div>
  {% endif %}
</section>
{% endblock %}
