{% extends "base.html" %}
{% load static %}

{% block title %}Lista de usuarios{% endblock %}

{% block page_css %}
<link rel="stylesheet" href="{% static 'css/pages/listar_usuarios.css' %}">
{% endblock %}

{% block content %}
<section class="card">
  <div class="row row--between">
    <h1 style="margin:0">Lista de usuarios</h1>
    <a class="btn btn--siga btn--sm" href="{% url 'panel_home' %}">Volver</a>
  </div>

  {% if usuarios %}
    <div class="table-wrap">
      <table class="table table--sticky table--stack">
        <thead>
          <tr>
            <th>RUT</th>
            <th>Nombre</th>
            <th>Cargo</th>
            <th>Email</th>
            <th style="min-width:140px">Acciones</th>
          </tr>
        </thead>
        <tbody>
          {% for u in usuarios %}
            <tr>
              <td data-label="RUT">{{ u.rut }}</td>
              <td data-label="Nombre">{{ u.first_name }} {{ u.last_name }}</td>
              <td data-label="Cargo">{{ u.get_cargo_display }}</td>
              <td data-label="Email" class="email">{{ u.email }}</td>
              <td data-label="Acciones" class="acciones">
                {% if u.rut %}
                  <a class="btn btn--ghost btn--sm" href="{% url 'editar_usuario' u.rut %}">Editar</a>
                  <a class="btn btn--ghost btn--sm btn--danger"
                     href="{% url 'borrar_usuario' u.rut %}"
                     onclick="return confirm('Â¿Eliminar al usuario {{ u.first_name }} {{ u.last_name }} ({{ u.rut }})?');">
                    Eliminar
                  </a>
                {% else %}
                  <span class="muted">RUT no disponible</span>
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="empty-state">No hay usuarios para mostrar.</div>
  {% endif %}
</section>
{% endblock %}
